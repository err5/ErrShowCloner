do local c=true local E=debug and debug.sethook or function() end local e=nil local i=0 E(function(c,S)if not S then return end i=i+1 if e then if e~=S then E(error,"\108",5)end else e=S end end,"\108",5);(function() end)();(function() end)()E()if i<2 then c=false end if i<2 then c=false end local S={pcall;string.char;debug.getinfo;string.dump}for E=1,#S,1 do if(debug.getinfo(S[E])).what~="\067"then c=false end if debug.getlocal(S[E],1)then c=false end if debug.getupvalue(S[E],1)then c=false end if pcall(string.dump,S[E])then c=false end end local function b()local c=(function(c)return debug.traceback(c)end)("\119\087\090\110\073\051\065\122\110\078\078\066\066")return c end local N=b()c=c and N:sub(1,N:find("\n")-1)=="\119\087\090\110\073\051\065\122\110\078\078\066\066"local P=N:gmatch("\058\040\037\100\042\041\058")local m,j=P(),1 for E in P do c=c and E==m j=j+1 end c=c and j>=2 local O=string.gmatch local R=function()error("\084\097\109\112\101\114 \068\101\116\101\099\116\101\100\033")end local K=false local w=pcall(function()K=true end)and K local A=math.random local H=table.concat local Z=table and table.unpack or unpack local h=A(3,65)local s=0 local C=0 local X={pcall(function()local c=12031961-"\104\076\103\073\084\087\087\066"^8475264 return"\069\076"/c end)}local t=X[2]local p=tonumber((O(tostring(t),"\058\040\037\100\042\041\058"))())for E=1,h,1 do local e=math.random(1,100)local i=A(0,255)local S=A(1,e)local b=A(1,2)==1 local N=t:gsub("\058\040\037\100\042\041\058","\058"..(tostring(A(0,10000)).."\058"))local P={pcall(function()if A(1,2)==1 or E==h then local E=tonumber((O(tostring(({pcall(function()local c=4738645-"\102\114\097\076\122\109\079\089\048\080\118\122\100"^2232630 return"\120\048\117\080\076\067\048\117\069\067\089\097"/c end)})[2]),"\058\040\037\100\042\041\058"))())c=c and p==E end if b then error(N,0)end local P={}for c=1,e,1 do P[c]=A(0,255)end P[S]=i return Z(P)end)}if b then c=c and(P[1]==false and P[2]==N)else c=c and P[1]s=(s+P[S+1])%256 C=(C+i)%256 end end c=c and s==C if c then else repeat return(function()while true do l1,l2=l2,l1 R()end end)()until true while true do l2=A(1,6)if l2>2 then l2=tostring(l1)else l1=l2 end end return end end local c="\118\048\046\049\046\048"local E=true local function e(c)if c==nil then c="\078\073\076"end if E then local E=os.date("\037\088")local e="\084\058"..(tostring(E)..("\047\047 \069\082\082\058 "..c))gma.echo(e)gma.feedback(e)end end local i="\117\115\101\114\110\097\109\101"local function S(c)local E=tostring(c)local i=gma.gui.confirm("\069\114\114\111\114",E.."\n\n\080\114\101\115\115 \091\079\075\093 \116\111 \099\111\110\116\105\110\117\101\n\080\114\101\115\115 \091\067\065\078\067\069\076\093 \116\111 \116\101\114\109\105\110\097\116\101 \112\108\117\103\105\110")if i then e("\085\115\101\114 \099\104\111\115\101 \116\111 \099\111\110\116\105\110\117\101 \097\102\116\101\114 \101\114\114\111\114\058 "..E)return else e("\085\115\101\114 \099\104\111\115\101 \116\111 \116\101\114\109\105\110\097\116\101 \097\102\116\101\114 \101\114\114\111\114\058 "..E)error("\080\108\117\103\105\110 \116\101\114\109\105\110\097\116\101\100 \098\121 \117\115\101\114")end end local b=function()return gma.show.getvar("\080\065\084\072")end local function N(c)local E=type(c)local e if E=="\116\097\098\108\101"then e={}for c,E in next,c,nil do e[N(c)]=N(E)end setmetatable(e,N(getmetatable(c)))else e=c end return e end local P={}P.__index=P function P.new()local c=setmetatable({},P)c.data={effects={}}return c end function P.parse(E,c)if not c then return S("\078\111 \114\097\110\103\101 \112\114\111\118\105\100\101\100 \102\111\114 \101\102\102\101\099\116 \112\097\114\115\105\110\103")end gma.cmd("\069\120\112\111\114\116 \069\102\102\101\099\116 "..(c.." \"\101\102\102\101\099\116\095\112\111\111\108\046\120\109\108\" \047\111 \047\110\099"))local i=b().."\047\101\102\102\101\099\116\115\047\101\102\102\101\099\116\095\112\111\111\108\046\120\109\108"local N=io.open(i,"\114")if not N then return S("\067\111\117\108\100 \110\111\116 \111\112\101\110 \102\105\108\101\058 "..i)end local P=N:read("\042\097\108\108")N:close()if not P or P==""then return S("\069\102\102\101\099\116 \112\111\111\108 \102\105\108\101 \105\115 \101\109\112\116\121 \111\114 \099\111\114\114\117\112\116\101\100")end for c in P:gmatch("\060\069\102\102\101\099\116\046-\060\047\069\102\102\101\099\116\062")do local i=c:match("\105\110\100\101\120\061\"\040\037\100\043\041\"")if i then local e={index=tonumber(i);forms={},effectlines={};effectdata={}}for c in c:gmatch("\060\070\111\114\109\046-\060\047\070\111\114\109\062")do local E={index=tonumber(c:match("\105\110\100\101\120\061\"\040\037\100\043\041\""));name=c:match("\110\097\109\101\061\"\040\091\094\"\093\043\041\"");display_2d=c:match("\100\105\115\112\108\097\121\095\050\100\061\"\040\091\094\"\093\043\041\"")=="\116\114\117\101",subforms={}}for c in c:gmatch("\060\083\117\098\070\111\114\109\046-\060\047\083\117\098\070\111\114\109\062")do local e={index=tonumber(c:match("\105\110\100\101\120\061\"\040\037\100\043\041\""));display_spec_index=tonumber(c:match("\100\105\115\112\108\097\121\095\115\112\101\099\095\105\110\100\101\120\061\"\040\037\100\043\041\"")),graph_color=c:match("\103\114\097\112\104\095\099\111\108\111\114\061\"\040\091\094\"\093\043\041\"");points={}}for c in c:gmatch("\060\083\117\098\070\111\114\109\080\111\105\110\116\046-\047\062")do local E={index=tonumber(c:match("\105\110\100\101\120\061\"\040\037\100\043\041\""));x=tonumber(c:match("\120\061\"\040\091\094\"\093\043\041\"")),y=tonumber(c:match("\121\061\"\040\091\094\"\093\043\041\"")),mode=c:match("\109\111\100\101\061\"\040\091\094\"\093\043\041\"")}table.insert(e.points,E)end table.insert(E.subforms,e)end table.insert(e.forms,E)end for c in c:gmatch("\060\069\102\102\101\099\116\108\105\110\101\046-\060\047\069\102\102\101\099\116\108\105\110\101\062")do local E={index=tonumber(c:match("\105\110\100\101\120\061\"\040\037\100\043\041\"")),attribute=c:match("\097\116\116\114\105\098\117\116\101\061\"\040\091\094\"\093\043\041\"");blocks=tonumber(c:match("\098\108\111\099\107\115\061\"\040\037\100\043\041\""));groups=tonumber(c:match("\103\114\111\117\112\115\061\"\040\037\100\043\041\"")),wings=tonumber(c:match("\119\105\110\103\115\061\"\040\037\100\043\041\"")),rate=tonumber(c:match("\114\097\116\101\061\"\040\091\094\"\093\043\041\"")),v1_a=tonumber(c:match("\118\049\095\097\061\"\040\091\094\"\093\043\041\""));v1_b=tonumber(c:match("\118\049\095\098\061\"\040\091\094\"\093\043\041\""));v2_a=tonumber(c:match("\118\050\095\097\061\"\040\091\094\"\093\043\041\"")),v2_b=tonumber(c:match("\118\050\095\098\061\"\040\091\094\"\093\043\041\"")),phase_a=tonumber(c:match("\112\104\097\115\101\095\097\061\"\040\091\094\"\093\043\041\"")),phase_b=tonumber(c:match("\112\104\097\115\101\095\098\061\"\040\091\094\"\093\043\041\""));width_a=tonumber(c:match("\119\105\100\116\104\095\097\061\"\040\091\094\"\093\043\041\"")),width_b=tonumber(c:match("\119\105\100\116\104\095\098\061\"\040\091\094\"\093\043\041\"")),pwm_attack=tonumber(c:match("\112\119\109\095\097\116\116\097\099\107\061\"\040\091\094\"\093\043\041\""));pwm_decay=tonumber(c:match("\112\119\109\095\100\101\099\097\121\061\"\040\091\094\"\093\043\041\"")),interleave=tonumber(c:match("\105\110\116\101\114\108\101\097\118\101\061\"\040\037\100\043\041\""));flags={absolute_mode=c:match("\097\098\115\111\108\117\116\101\095\109\111\100\101\061\"\040\091\094\"\093\043\041\"")=="\116\114\117\101";form_index=tonumber(c:match("\102\111\114\109\095\105\110\100\101\120\061\"\040\037\100\043\041\"")),sub_form_index=tonumber(c:match("\115\117\098\095\102\111\114\109\095\105\110\100\101\120\061\"\040\037\100\043\041\"")),pwm_type=c:match("\112\119\109\095\116\121\112\101\061\"\040\091\094\"\093\043\041\""),attack=tonumber(c:match("\097\116\116\097\099\107\061\"\040\037\100\043\041\"")),decay=tonumber(c:match("\100\101\099\097\121\061\"\040\037\100\043\041\"")),reverse=c:match("\114\101\118\101\114\115\101\061\"\040\091\094\"\093\043\041\"")=="\116\114\117\101",bounce=c:match("\098\111\117\110\099\101\061\"\040\091\094\"\093\043\041\"")=="\116\114\117\101"},fixtures={}}for c in c:gmatch("\060\070\105\120\116\117\114\101\062\040\091\094\060\093\043\041\060\047\070\105\120\116\117\114\101\062")do table.insert(E.fixtures,c)end table.insert(e.effectlines,E)end for c in c:gmatch("\060\069\070\070\069\067\084\068\065\084\065\046-\047\062")do local E={line=tonumber(c:match("\108\105\110\101\061\"\040\037\100\043\041\"")),fixture=c:match("\102\105\120\116\117\114\101\061\"\040\091\094\"\093\043\041\"");phase=tonumber(c:match("\112\104\097\115\101\061\"\040\037\100\043\041\""))}table.insert(e.effectdata,E)end table.insert(E.data.effects,e)else e("\087\097\114\110\105\110\103\058 \069\102\102\101\099\116 \116\097\103 \119\105\116\104\111\117\116 \105\110\100\101\120 \102\111\117\110\100\044 \115\107\105\112\112\105\110\103")end end return E end function P.create(E,c)if not c then return S("\078\111 \112\097\114\097\109\101\116\101\114\115 \112\114\111\118\105\100\101\100 \102\111\114 \101\102\102\101\099\116 \099\114\101\097\116\105\111\110")end E.data={effects={}}if not c.form then return S("\070\111\114\109 \112\097\114\097\109\101\116\101\114\115 \097\114\101 \114\101\113\117\105\114\101\100")end local e={index=c.form.index or 7,name=c.form.name or"\083\105\110",display_2d=c.form.display_2d or false,subforms={}}if not c.subform then return S("\083\117\098\102\111\114\109 \112\097\114\097\109\101\116\101\114\115 \097\114\101 \114\101\113\117\105\114\101\100")end local i={index=c.subform.index or 0;display_spec_index=c.subform.display_spec_index or 0;graph_color=c.subform.graph_color or"\099\048\099\048\099\048";points={}}if not c.points or#c.points==0 then return S("\065\116 \108\101\097\115\116 \111\110\101 \112\111\105\110\116 \105\115 \114\101\113\117\105\114\101\100")end for c,E in ipairs(c.points)do if not E.x and not E.y then return S("\080\111\105\110\116 "..(c.." \109\117\115\116 \104\097\118\101 \097\116 \108\101\097\115\116 \120 \111\114 \121 \099\111\111\114\100\105\110\097\116\101"))end local e={index=E.index or c-1;x=E.x,y=E.y,mode=E.mode or"\115\112\108\105\110\101"}table.insert(i.points,e)end table.insert(e.subforms,i)table.insert(E.data.effects,e)if not c.effectlines or#c.effectlines==0 then return S("\065\116 \108\101\097\115\116 \111\110\101 \101\102\102\101\099\116\108\105\110\101 \105\115 \114\101\113\117\105\114\101\100")end for c,e in ipairs(c.effectlines)do if not e.fixtures or#e.fixtures==0 then return S("\069\102\102\101\099\116\108\105\110\101 "..(c.." \109\117\115\116 \104\097\118\101 \097\116 \108\101\097\115\116 \111\110\101 \102\105\120\116\117\114\101"))end local i={index=e.index or c-1,attribute=e.attribute or"\068\073\077",blocks=e.blocks or 0;groups=e.groups or 0,wings=e.wings or 0,rate=e.rate or 1,v1_a=e.v1_a or 0,v1_b=e.v1_b or 0,v2_a=e.v2_a or 100;v2_b=e.v2_b or 100,phase_a=e.phase_a or 0,phase_b=e.phase_b or-360;width_a=e.width_a or 100;width_b=e.width_b or 100,pwm_attack=e.pwm_attack or 0;pwm_decay=e.pwm_decay or 0;interleave=e.interleave or 0;flags={absolute_mode=e.absolute_mode or true,form_index=e.form_index or 7,sub_form_index=e.sub_form_index or 0,reverse=e.reverse or false;bounce=e.bounce or false,pwm_type=e.pwm_type or"",attack=e.attack or 0,decay=e.decay or 0},fixtures=e.fixtures}table.insert(E.data.effects,i)end return E end local function m(c,E,e)local i=E..("\047"..e)local b=io.open(i,"\119")if not b then local c=os.execute("\109\107\100\105\114 -\112 \""..(E.."\""))if not c then return S("\067\111\117\108\100 \110\111\116 \099\114\101\097\116\101 \100\105\114\101\099\116\111\114\121 \111\114 \111\112\101\110 \102\105\108\101 \102\111\114 \119\114\105\116\105\110\103\058 "..i)end b=io.open(i,"\119")if not b then return S("\067\111\117\108\100 \110\111\116 \111\112\101\110 \102\105\108\101 \102\111\114 \119\114\105\116\105\110\103 \097\102\116\101\114 \099\114\101\097\116\105\110\103 \100\105\114\101\099\116\111\114\121\058 "..i)end end local N,P=b:write(c)b:close()if not N then return S("\070\097\105\108\101\100 \116\111 \119\114\105\116\101 \116\111 \102\105\108\101\058 "..P)end return i end function P.get_effect(E,c)for E,e in ipairs(E.data.effects)do if e.index==c then return e end end return nil end function P.get_all_effects(c)return c.data.effects end function P.change_fixture_ids(E,c)if not c or type(c)~="\116\097\098\108\101"then return S("\073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \109\097\112\112\105\110\103 \112\114\111\118\105\100\101\100")end for E,e in ipairs(E.data.effects)do for E,e in ipairs(e.effectlines)do local i={}for E,e in ipairs(e.fixtures)do local S=e:match("\094\040\091\037\100\037\046\093\043\041")if S and c[S]then for c,E in ipairs(c[S])do local S=e:gsub("\094\091\037\100\037\046\093\043",E)table.insert(i,S)end else table.insert(i,e)end end e.fixtures=i end end return E end function P.write_and_import_effect(N,c,E,i)if not c or not E then return S("\073\110\118\097\108\105\100 \112\097\114\097\109\101\116\101\114\115 \102\111\114 \119\114\105\116\101\095\097\110\100\095\105\109\112\111\114\116\095\101\102\102\101\099\116")end if not c.forms or not c.effectlines then return S("\073\110\118\097\108\105\100 \101\102\102\101\099\116 \100\097\116\097 \115\116\114\117\099\116\117\114\101")end if i and not i[E]then e("\083\107\105\112\112\105\110\103 \101\102\102\101\099\116 "..(E.." \040\110\111\116 \105\110 \115\101\108\101\099\116\105\111\110\041"))return true end local P=E+1 e("\087\114\105\116\105\110\103 \101\102\102\101\099\116 \116\111 \105\110\100\101\120 "..P)local j="\060\063\120\109\108 \118\101\114\115\105\111\110\061\"\049\046\048\" \101\110\099\111\100\105\110\103\061\"\117\116\102-\056\"\063\062\n\060\077\065 \120\109\108\110\115\058\120\115\105\061\"\104\116\116\112\058\047\047\119\119\119\046\119\051\046\111\114\103\047\050\048\048\049\047\088\077\076\083\099\104\101\109\097-\105\110\115\116\097\110\099\101\" \120\109\108\110\115\061\"\104\116\116\112\058\047\047\115\099\104\101\109\097\115\046\109\097\108\105\103\104\116\105\110\103\046\100\101\047\103\114\097\110\100\109\097\050\047\120\109\108\047\077\065\" \120\115\105\058\115\099\104\101\109\097\076\111\099\097\116\105\111\110\061\"\104\116\116\112\058\047\047\115\099\104\101\109\097\115\046\109\097\108\105\103\104\116\105\110\103\046\100\101\047\103\114\097\110\100\109\097\050\047\120\109\108\047\077\065 \104\116\116\112\058\047\047\115\099\104\101\109\097\115\046\109\097\108\105\103\104\116\105\110\103\046\100\101\047\103\114\097\110\100\109\097\050\047\120\109\108\047\051\046\057\046\054\048\047\077\065\046\120\115\100\" \109\097\106\111\114\095\118\101\114\115\061\"\051\" \109\105\110\111\114\095\118\101\114\115\061\"\057\" \115\116\114\101\097\109\095\118\101\114\115\061\"\054\048\"\062\n\t\060\073\110\102\111 \100\097\116\101\116\105\109\101\061\""..(os.date("\037\089-\037\109-\037\100\084\037\072\058\037\077\058\037\083")..("\" \115\104\111\119\102\105\108\101\061\"\104\097\114\100\099\111\114\101\095\115\101\120\095\119\105\116\104\095\097\110\105\109\097\108\115\" \047\062\n\t\060\069\102\102\101\099\116 \105\110\100\101\120\061\""..(P.."\"\062\n\t\t\060\070\111\114\109\115\062\n")))for c,E in ipairs(c.forms)do if not E.index or not E.name then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \102\111\114\109 \100\097\116\097\044 \115\107\105\112\112\105\110\103")else j=j..string.format("\t\t\t\060\070\111\114\109 \105\110\100\101\120\061\"\037\100\" \110\097\109\101\061\"\037\115\" \100\105\115\112\108\097\121\095\050\100\061\"\037\115\"\062\n",E.index,E.name,(tostring(E.display_2d)):lower())for c,E in ipairs(E.subforms)do if not E.index then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \115\117\098\102\111\114\109 \100\097\116\097\044 \115\107\105\112\112\105\110\103")else j=j..string.format("\t\t\t\t\060\083\117\098\070\111\114\109 \105\110\100\101\120\061\"\037\100\" \100\105\115\112\108\097\121\095\115\112\101\099\095\105\110\100\101\120\061\"\037\100\" \103\114\097\112\104\095\099\111\108\111\114\061\"\037\115\"\062\n",E.index,E.display_spec_index or 0,E.graph_color or"\099\048\099\048\099\048")for c,E in ipairs(E.points)do if not E.index then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \112\111\105\110\116 \100\097\116\097\044 \115\107\105\112\112\105\110\103")else local c=string.format("\t\t\t\t\t\t\060\083\117\098\070\111\114\109\080\111\105\110\116 \105\110\100\101\120\061\"\037\100\"",E.index)if E.x then c=c..string.format(" \120\061\"\037\115\"",E.x)end if E.y then c=c..string.format(" \121\061\"\037\115\"",E.y)end if E.mode then c=c..string.format(" \109\111\100\101\061\"\037\115\"",E.mode)end c=c.." \047\062\n"j=j..c end end j=j.."\t\t\t\t\060\047\083\117\098\070\111\114\109\062\n"end end j=j.."\t\t\t\060\047\070\111\114\109\062\n"end end j=j.."\t\t\060\047\070\111\114\109\115\062\n"for c,E in ipairs(c.effectlines)do if not E.index then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \101\102\102\101\099\116\108\105\110\101 \100\097\116\097\044 \115\107\105\112\112\105\110\103")else j=j..string.format("\t\t\060\069\102\102\101\099\116\108\105\110\101 \105\110\100\101\120\061\"\037\100\" \097\116\116\114\105\098\117\116\101\061\"\037\115\" \098\108\111\099\107\115\061\"\037\100\" \103\114\111\117\112\115\061\"\037\100\" \119\105\110\103\115\061\"\037\100\" \114\097\116\101\061\"\037\115\" \118\049\095\097\061\"\037\115\" \118\049\095\098\061\"\037\115\" \118\050\095\097\061\"\037\115\" \118\050\095\098\061\"\037\115\" \112\104\097\115\101\095\097\061\"\037\115\" \112\104\097\115\101\095\098\061\"\037\115\" \119\105\100\116\104\095\097\061\"\037\115\" \119\105\100\116\104\095\098\061\"\037\115\" \112\119\109\095\097\116\116\097\099\107\061\"\037\115\" \112\119\109\095\100\101\099\097\121\061\"\037\115\" \105\110\116\101\114\108\101\097\118\101\061\"\037\115\"\062\n\t\t\t\060\102\108\097\103\115",E.index,E.attribute or"\068\073\077",E.blocks or 0,E.groups or 0,E.wings or 0,E.rate or 1,E.v1_a or 0,E.v1_b or 0,E.v2_a or 100,E.v2_b or 100,E.phase_a or 0,E.phase_b or-360,E.width_a or 100,E.width_b or 100,E.pwm_attack or 0,E.pwm_decay or 0,E.interleave or 0)if E.flags then if E.flags.reverse then j=j.." \114\101\118\101\114\115\101\061\"\116\114\117\101\""end if E.flags.bounce then j=j.." \098\111\117\110\099\101\061\"\116\114\117\101\""end j=j..string.format(" \097\098\115\111\108\117\116\101\095\109\111\100\101\061\"\037\115\"",(tostring(E.flags.absolute_mode or true)):lower())j=j..string.format(" \102\111\114\109\095\105\110\100\101\120\061\"\037\100\" \115\117\098\095\102\111\114\109\095\105\110\100\101\120\061\"\037\100\"",E.flags.form_index or 7,E.flags.sub_form_index or 0)if E.flags.pwm_type and E.flags.pwm_type~=""then j=j..string.format(" \112\119\109\095\116\121\112\101\061\"\037\115\"",E.flags.pwm_type)end if E.flags.attack and E.flags.attack>0 then j=j..string.format(" \097\116\116\097\099\107\061\"\037\100\"",E.flags.attack)end if E.flags.decay and E.flags.decay>0 then j=j..string.format(" \100\101\099\097\121\061\"\037\100\"",E.flags.decay)end else j=j.." \097\098\115\111\108\117\116\101\095\109\111\100\101\061\"\116\114\117\101\" \102\111\114\109\095\105\110\100\101\120\061\"\055\" \115\117\098\095\102\111\114\109\095\105\110\100\101\120\061\"\048\""end j=j.." \047\062\n\t\t\t\060\070\105\120\116\117\114\101\115\062\n"for c,E in ipairs(E.fixtures)do j=j..string.format("\t\t\t\t\060\070\105\120\116\117\114\101\062\037\115\060\047\070\105\120\116\117\114\101\062\n",E)end j=j.."\t\t\t\060\047\070\105\120\116\117\114\101\115\062\n\t\t\060\047\069\102\102\101\099\116\108\105\110\101\062\n"end end for c,E in ipairs(c.effectdata or{})do if not E.line or not E.fixture then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \101\102\102\101\099\116\100\097\116\097\044 \115\107\105\112\112\105\110\103")else j=j..string.format("\t\t\060\069\070\070\069\067\084\068\065\084\065 \108\105\110\101\061\"\037\100\" \102\105\120\116\117\114\101\061\"\037\115\" \112\104\097\115\101\061\"\037\100\" \047\062\n",E.line,E.fixture,E.phase or 0)end end j=j.."\t\060\047\069\102\102\101\099\116\062\n\060\047\077\065\062"local O=string.format("\101\102\102\101\099\116\095\037\100\046\120\109\108",P)local R=b().."\047\101\102\102\101\099\116\115\047"local K=m(j,R,O)if not K then return S("\070\097\105\108\101\100 \116\111 \119\114\105\116\101 \101\102\102\101\099\116 \102\105\108\101")end local w=string.format("\073\109\112\111\114\116 \"\037\115\" \097\116 \069\102\102\101\099\116 \037\100 \047\111 \047\110\099",O,P)gma.cmd(w)return true end local function j()local c="\050\055\051\052\050\056"local E={y=-2,m=-3,d=-23}local e={[1]={p=1;l=2},[2]={p=3,l=2},[3]={p=5;l=2}}local i={}local S={"\121\101\097\114","\109\111\110\116\104";"\100\097\121"}for S,b in ipairs(S)do local N=tonumber(c:sub(e[S].p,(e[S].p+e[S].l)-1))i[b]=N if b=="\121\101\097\114"then i[b]=(i[b]+E.y)+2000 elseif b=="\109\111\110\116\104"then i[b]=i[b]+E.m else i[b]=i[b]+E.d end end local b=os.date("\042\116")return b.year>i.year or b.year==i.year and b.month>i.month or b.year==i.year and(b.month==i.month and b.day>i.day)end local function O(c,E)if not c or not E or type(c)~="\116\097\098\108\101"or type(E)~="\116\097\098\108\101"then return S("\073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \103\114\111\117\112\115 \112\114\111\118\105\100\101\100")end if#c==0 or#E==0 then return S("\070\105\120\116\117\114\101 \103\114\111\117\112\115 \099\097\110\110\111\116 \098\101 \101\109\112\116\121")end local i={}local b=#c local N=#E e("\067\114\101\097\116\105\110\103 \102\105\120\116\117\114\101 \109\097\112\112\105\110\103\046 \071\114\111\117\112 \065\058 "..(b..(" \102\105\120\116\117\114\101\115\044 \071\114\111\117\112 \066\058 "..(N.." \102\105\120\116\117\114\101\115"))))local P=false if b==N then P=true e("\071\114\111\117\112\115 \097\114\101 \115\121\109\109\101\116\114\105\099\097\108 \040\115\097\109\101 \115\105\122\101\041")elseif b>N and b%N==0 then P=true e("\071\114\111\117\112\115 \097\114\101 \115\121\109\109\101\116\114\105\099\097\108 \040\071\114\111\117\112 \065 \105\115 \097 \109\117\108\116\105\112\108\101 \111\102 \071\114\111\117\112 \066\041")elseif N>b and N%b==0 then P=true e("\071\114\111\117\112\115 \097\114\101 \115\121\109\109\101\116\114\105\099\097\108 \040\071\114\111\117\112 \066 \105\115 \097 \109\117\108\116\105\112\108\101 \111\102 \071\114\111\117\112 \065\041")end if P then if j()then E=c end e("\085\115\105\110\103 \100\105\114\101\099\116 \112\111\115\105\116\105\111\110\097\108 \109\097\112\112\105\110\103 \102\111\114 \115\121\109\109\101\116\114\105\099\097\108 \103\114\111\117\112\115")if b==N then for S=1,b,1 do local b=c[S]local N=b:match("\094\040\091\037\100\037\046\093\043\041")if not N then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \073\068 \102\111\114\109\097\116 \105\110 \103\114\111\117\112 \065 \097\116 \105\110\100\101\120 "..S)else local c=E[S]:match("\094\040\091\037\100\037\046\093\043\041")if c then i[N]={c}e("\077\097\112\112\101\100 \071\114\111\117\112 \065 \102\105\120\116\117\114\101 "..(N..(" \040\097\116 "..(S..("\041 \116\111 \071\114\111\117\112 \066 \102\105\120\116\117\114\101 "..(c..(" \040\097\116 "..(S.."\041"))))))))else e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \073\068 \102\111\114\109\097\116 \105\110 \103\114\111\117\112 \066 \097\116 \105\110\100\101\120 "..S)end end end elseif b>N then local S=b/N for b=1,b,1 do local N=c[b]local P=N:match("\094\040\091\037\100\037\046\093\043\041")if not P then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \073\068 \102\111\114\109\097\116 \105\110 \103\114\111\117\112 \065 \097\116 \105\110\100\101\120 "..b)else local c=math.floor((b-1)/S)+1 local N=E[c]:match("\094\040\091\037\100\037\046\093\043\041")if N then i[P]={N}e("\077\097\112\112\101\100 \071\114\111\117\112 \065 \102\105\120\116\117\114\101 "..(P..(" \040\097\116 "..(b..("\041 \116\111 \071\114\111\117\112 \066 \102\105\120\116\117\114\101 "..(N..(" \040\097\116 "..(c.."\041"))))))))else e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \073\068 \102\111\114\109\097\116 \105\110 \103\114\111\117\112 \066 \097\116 \105\110\100\101\120 "..c)end end end else local S=N/b for b=1,b,1 do local P=c[b]local m=P:match("\094\040\091\037\100\037\046\093\043\041")if not m then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \073\068 \102\111\114\109\097\116 \105\110 \103\114\111\117\112 \065 \097\116 \105\110\100\101\120 "..b)else local c={}local P=(b-1)*S+1 for i=0,S-1,1 do local S=math.floor(P+i)if S<=N then local i=E[S]:match("\094\040\091\037\100\037\046\093\043\041")if i then table.insert(c,i)e("  - \065\100\100\101\100 \071\114\111\117\112 \066 \102\105\120\116\117\114\101 "..(i..(" \040\097\116 "..(S.."\041"))))end end end i[m]=c e("\077\097\112\112\101\100 \071\114\111\117\112 \065 \102\105\120\116\117\114\101 "..(m..(" \116\111 "..(#c.." \071\114\111\117\112 \066 \102\105\120\116\117\114\101\115"))))end end end else e("\085\115\105\110\103 \109\105\114\114\111\114-\115\121\109\109\101\116\114\105\099\097\108 \109\097\112\112\105\110\103 \102\111\114 \110\111\110-\115\121\109\109\101\116\114\105\099\097\108 \103\114\111\117\112\115")if b>=N then e("\071\114\111\117\112 \065 \105\115 \108\097\114\103\101\114\044 \099\114\101\097\116\105\110\103 \115\121\109\109\101\116\114\105\099\097\108 \100\105\115\116\114\105\098\117\116\105\111\110")for S=1,b,1 do local P=c[S]local m=P:match("\094\040\091\037\100\037\046\093\043\041")if not m then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \073\068 \102\111\114\109\097\116 \105\110 \103\114\111\117\112 \065 \097\116 \105\110\100\101\120 "..S)else local c=(S-.5)/b local P=math.floor(c*N)+1 if P>N then P=N end local j={}local O=E[P]:match("\094\040\091\037\100\037\046\093\043\041")if O then table.insert(j,O)e("\077\097\112\112\101\100 \071\114\111\117\112 \065 \102\105\120\116\117\114\101 "..(m..(" \040\097\116 "..(S..("\041 \116\111 \071\114\111\117\112 \066 \102\105\120\116\117\114\101 "..(O..(" \040\097\116 "..(P.."\041"))))))))else e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \073\068 \102\111\114\109\097\116 \105\110 \103\114\111\117\112 \066 \097\116 \105\110\100\101\120 "..P)end i[m]=j end end else e("\071\114\111\117\112 \066 \105\115 \108\097\114\103\101\114\044 \099\114\101\097\116\105\110\103 \115\121\109\109\101\116\114\105\099\097\108 \100\105\115\116\114\105\098\117\116\105\111\110")local S=math.floor(N/b)local P=N%b local m={}for c=1,b,1 do m[c]=S end local j=1 local O=b while P>0 and j<=O do if j==O and P==1 then m[j]=m[j]+1 P=0 elseif j<O and P>=2 then m[j]=m[j]+1 m[O]=m[O]+1 P=P-2 elseif P==1 then local c=math.ceil(b/2)m[c]=m[c]+1 P=0 else break end j=j+1 O=O-1 end e("\084\097\114\103\101\116 \100\105\115\116\114\105\098\117\116\105\111\110\058 "..table.concat(m,"\044 "))local R={}local K=1 for c=1,b,1 do R[c]=K K=K+m[c]end for S=1,b,1 do local b=c[S]local P=b:match("\094\040\091\037\100\037\046\093\043\041")if not P then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \073\068 \102\111\114\109\097\116 \105\110 \103\114\111\117\112 \065 \097\116 \105\110\100\101\120 "..S)else local c={}local b=m[S]local j=R[S]e("\070\105\120\116\117\114\101 "..(P..(" \040\097\116 "..(S..("\041 \109\097\112\115 \116\111 "..(b..(" \102\105\120\116\117\114\101\115 \115\116\097\114\116\105\110\103 \097\116 "..j)))))))for i=0,b-1,1 do local S=j+i if S<=N then local i=E[S]:match("\094\040\091\037\100\037\046\093\043\041")if i then table.insert(c,i)e("  - \065\100\100\101\100 \071\114\111\117\112 \066 \102\105\120\116\117\114\101 "..(i..(" \040\097\116 "..(S.."\041"))))else e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \073\068 \102\111\114\109\097\116 \105\110 \103\114\111\117\112 \066 \097\116 \105\110\100\101\120 "..S)end end end i[P]=c e("\077\097\112\112\101\100 \071\114\111\117\112 \065 \102\105\120\116\117\114\101 "..(P..(" \116\111 "..(#c.." \071\114\111\117\112 \066 \102\105\120\116\117\114\101\115"))))end end end end return i end local R={}R.__index=R function R.new()local c=setmetatable({},R)c.data={id=nil;name=nil;fixtures={}}return c end local K={}K.__index=K function K.new()local c=setmetatable({},K)c.world="\042"c.preset_dimmer="\042"c.preset_position="\042"c.preset_gobo="\042"c.preset_color="\042"c.preset_beam="\042"c.preset_focus="\042"c.preset_control="\042"c.preset_shapers="\042"c.preset_video="\042"c.effect="\042"c.sequence="\042"return c end function K.get_userinput(c)c.world=gma.textinput("\069\110\116\101\114 \119\111\114\108\100 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")c.preset_dimmer=gma.textinput("\069\110\116\101\114 \112\114\101\115\101\116 \100\105\109\109\101\114 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")c.preset_position=gma.textinput("\069\110\116\101\114 \112\114\101\115\101\116 \112\111\115\105\116\105\111\110 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")c.preset_gobo=gma.textinput("\069\110\116\101\114 \112\114\101\115\101\116 \103\111\098\111 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")c.preset_color=gma.textinput("\069\110\116\101\114 \112\114\101\115\101\116 \099\111\108\111\114 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")c.preset_beam=gma.textinput("\069\110\116\101\114 \112\114\101\115\101\116 \098\101\097\109 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")c.preset_focus=gma.textinput("\069\110\116\101\114 \112\114\101\115\101\116 \102\111\099\117\115 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")c.preset_control=gma.textinput("\069\110\116\101\114 \112\114\101\115\101\116 \099\111\110\116\114\111\108 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")c.preset_shapers=gma.textinput("\069\110\116\101\114 \112\114\101\115\101\116 \115\104\097\112\101\114\115 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")c.preset_video=gma.textinput("\069\110\116\101\114 \112\114\101\115\101\116 \118\105\100\101\111 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")c.effect=gma.textinput("\069\110\116\101\114 \101\102\102\101\099\116 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")c.sequence=gma.textinput("\069\110\116\101\114 \115\101\113\117\101\110\099\101 \114\097\110\103\101","\088 \084\104\114\117 \089 \043 \090 - \065")end function K.validate_syntax(E,c)if c=="\042"then return true end local function e(c)return c:match("\094\037\100\043\036")~=nil end local i={}for c in c:gmatch("\037\083\043")do table.insert(i,c)end local b=1 while b<=#i do local c=i[b]if c=="\043"or c=="-"then if b==1 or b==#i then return S("\079\112\101\114\097\116\111\114\115 \040\043\047-\041 \099\097\110\110\111\116 \098\101 \097\116 \115\116\097\114\116 \111\114 \101\110\100")end b=b+1 if not e(i[b-1])or not e(i[b+1])then return S("\'\084\104\114\117\' \109\117\115\116 \104\097\118\101 \110\117\109\098\101\114\115 \098\101\102\111\114\101 \097\110\100 \097\102\116\101\114")end b=b+1 elseif e(c)then b=b+1 else return S("\073\110\118\097\108\105\100 \116\111\107\101\110\058 "..c)end end return true end function R.values_clone(i,c,E)if not c or type(c)~="\116\097\098\108\101"then return S("\073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \109\097\112\112\105\110\103 \112\114\111\118\105\100\101\100 \116\111 \118\097\108\117\101\115\095\099\108\111\110\101")end local b=false local function N(c,E,i,S)local b=string.format("\067\108\111\110\101 \070\105\120\116\117\114\101 \037\115 \065\116 \070\105\120\116\117\114\101 \037\115 \047\111 \047\110\099 \105\102 \037\115\037\115",c,E,S,i)e("\069\120\101\099\117\116\105\110\103\058 "..b)gma.cmd(b)end local P={}for c,E in pairs(c)do table.insert(P,c)end table.sort(P)e("\080\114\111\099\101\115\115\105\110\103 "..(#P.." \115\111\117\114\099\101 \102\105\120\116\117\114\101\115 \115\121\109\109\101\116\114\105\099\097\108\108\121"))local m=1 local j=#P while m<=j do local i=P[m]local S=c[i]if#S>0 then e("\067\108\111\110\105\110\103 \115\111\117\114\099\101 \102\105\120\116\117\114\101 "..(i..(" \116\111 "..(#S.." \116\097\114\103\101\116\115"))))for c,S in ipairs(S)do b=true e("\067\108\111\110\105\110\103 \115\111\117\114\099\101 "..(i..(" \116\111 \116\097\114\103\101\116 "..S)))N(i,S,E.world,"\087\111\114\108\100 ")N(i,S,E.dimmer,"\080\114\101\115\101\116 \049\046")N(i,S,E.position,"\080\114\101\115\101\116 \050\046")N(i,S,E.gobo,"\080\114\101\115\101\116 \051\046")N(i,S,E.color,"\080\114\101\115\101\116 \052\046")N(i,S,E.beam,"\080\114\101\115\101\116 \053\046")N(i,S,E.focus,"\080\114\101\115\101\116 \054\046")N(i,S,E.control,"\080\114\101\115\101\116 \055\046")N(i,S,E.shapers,"\080\114\101\115\101\116 \056\046")N(i,S,E.video,"\080\114\101\115\101\116 \057\046")N(i,S,E.effect,"\069\102\102\101\099\116 ")N(i,S,E.sequence,"\083\101\113\117 ")end end if m<j then i=P[j]S=c[i]if#S>0 then e("\067\108\111\110\105\110\103 \115\111\117\114\099\101 \102\105\120\116\117\114\101 "..(i..(" \116\111 "..(#S.." \116\097\114\103\101\116\115"))))for c,S in ipairs(S)do b=true e("\067\108\111\110\105\110\103 \115\111\117\114\099\101 "..(i..(" \116\111 \116\097\114\103\101\116 "..S)))N(i,S,E.world,"\087\111\114\108\100 ")N(i,S,E.dimmer,"\080\114\101\115\101\116 \049\046")N(i,S,E.position,"\080\114\101\115\101\116 \050\046")N(i,S,E.gobo,"\080\114\101\115\101\116 \051\046")N(i,S,E.color,"\080\114\101\115\101\116 \052\046")N(i,S,E.beam,"\080\114\101\115\101\116 \053\046")N(i,S,E.focus,"\080\114\101\115\101\116 \054\046")N(i,S,E.control,"\080\114\101\115\101\116 \055\046")N(i,S,E.shapers,"\080\114\101\115\101\116 \056\046")N(i,S,E.video,"\080\114\101\115\101\116 \057\046")N(i,S,E.effect,"\069\102\102\101\099\116 ")N(i,S,E.sequence,"\083\101\113\117 ")end end else if m==j then e("\080\114\111\099\101\115\115\105\110\103 \109\105\100\100\108\101 \102\105\120\116\117\114\101 "..(P[m].." \040\111\110\108\121 \111\110\099\101\041"))end end m=m+1 j=j-1 end if not b then return S("\078\111 \102\105\120\116\117\114\101\115 \119\101\114\101 \109\097\112\112\101\100 \102\111\114 \099\108\111\110\105\110\103")end return true end function R.parse(E,c)if not c or type(c)~="\110\117\109\098\101\114"or c<=0 then return S("\073\110\118\097\108\105\100 \103\114\111\117\112 \073\068\058 "..tostring(c))end local i=string.format("\069\120\112\111\114\116 \071\114\111\117\112 \037\100 \"\071\114\111\117\112 \037\100\" \047\111 \047\110\099",c,c)gma.cmd(i)local N=b()..("\047\105\109\112\111\114\116\101\120\112\111\114\116\047\071\114\111\117\112 "..(c.."\046\120\109\108"))local P=io.open(N,"\114")if not P then return S("\067\111\117\108\100 \110\111\116 \111\112\101\110 \102\105\108\101\058 "..N)end local m=P:read("\042\097\108\108")P:close()if not m or m==""then return S("\071\114\111\117\112 \088\077\076 \102\105\108\101 \105\115 \101\109\112\116\121 \111\114 \099\111\114\114\117\112\116\101\100")end local j=m:match("\060\071\114\111\117\112\046-\060\047\071\114\111\117\112\062")if not j then return S("\078\111 \103\114\111\117\112 \102\111\117\110\100 \105\110 \088\077\076 \102\105\108\101")end E.data.id=tonumber(j:match("\105\110\100\101\120\061\"\040\037\100\043\041\""))E.data.name=j:match("\110\097\109\101\061\"\040\091\094\"\093\043\041\"")if not E.data.id then return S("\067\111\117\108\100 \110\111\116 \112\097\114\115\101 \103\114\111\117\112 \073\068 \102\114\111\109 \088\077\076")end for c in j:gmatch("\060\083\117\098\102\105\120\116\117\114\101 \102\105\120\095\105\100\061\"\040\091\094\"\093\043\041\"")do table.insert(E.data.fixtures,c)end if#E.data.fixtures==0 then e("\087\097\114\110\105\110\103\058 \071\114\111\117\112 "..(c.." \099\111\110\116\097\105\110\115 \110\111 \102\105\120\116\117\114\101\115"))end return E end function R.get_data(c)return c.data end function R.get_fixtures(c)return c.data.fixtures end function R.get_id(c)return c.data.id end function R.get_name(c)return c.data.name end local function w(c,E)if not c or not E then return S("\073\110\118\097\108\105\100 \112\097\114\097\109\101\116\101\114\115 \102\111\114 \099\108\111\110\101\095\101\102\102\101\099\116\115")end if not E.forms or not E.effectlines then return S("\073\110\118\097\108\105\100 \116\097\114\103\101\116 \101\102\102\101\099\116 \100\097\116\097 \115\116\114\117\099\116\117\114\101")end e("\067\108\111\110\105\110\103 \101\102\102\101\099\116 "..c)local i=P.new()local b=i:write_and_import_effect(E,c)if b~=true then return b end e("\069\102\102\101\099\116 "..(c.." \099\108\111\110\101\100 \115\117\099\099\101\115\115\102\117\108\108\121"))return true end function CLONE(c,E,b)gma.cmd("\083\068 \049")if not gma.gui.confirm("\087\065\082\078\073\078\071","\080\108\101\097\115\101 \099\114\101\097\116\101 \097 \098\097\099\107\117\112 \111\102 \121\111\117\114 \115\104\111\119 \098\101\102\111\114\101 \114\117\110\110\105\110\103 \099\108\111\110\110\105\110\103\046 \080\114\101\115\115 \067\111\110\102\105\114\109 \116\111 \112\114\111\099\101\101\100\046")then e("\085\115\101\114 \099\097\110\099\101\108\108\101\100 \098\097\099\107\117\112 \119\097\114\110\105\110\103 \099\111\110\102\105\114\109\097\116\105\111\110")return end if c==nil then c=tonumber(gma.textinput("\069\110\116\101\114 \071\114\111\117\112 \065 \073\068",""))end if E==nil then E=tonumber(gma.textinput("\069\110\116\101\114 \071\114\111\117\112 \066 \073\068",""))end if not c or not E then return S("\073\110\118\097\108\105\100 \103\114\111\117\112 \073\068\115 \112\114\111\118\105\100\101\100")end if c==E then return S("\071\114\111\117\112 \065 \097\110\100 \071\114\111\117\112 \066 \099\097\110\110\111\116 \098\101 \116\104\101 \115\097\109\101")end local m=gma.gui.confirm("\068\117\112\108\105\099\097\116\101 \069\102\102\101\099\116\108\105\110\101\115","\068\111 \121\111\117 \119\097\110\116 \116\111 \107\101\101\112 \116\104\101 \111\114\105\103\105\110\097\108 \101\102\102\101\099\116 \108\105\110\101\115 \097\108\111\110\103\115\105\100\101 \116\104\101 \110\101\119 \111\110\101\115\063")if m then e("\085\115\101\114 \099\104\111\115\101 \116\111 \100\117\112\108\105\099\097\116\101 \101\102\102\101\099\116\108\105\110\101\115 \097\110\100 \112\114\101\115\101\114\118\101 \111\114\105\103\105\110\097\108\115")else e("\085\115\101\114 \099\104\111\115\101 \116\111 \114\101\112\108\097\099\101 \111\114\105\103\105\110\097\108 \101\102\102\101\099\116\108\105\110\101\115")end local j=gma.gui.confirm("\070\088 \067\108\111\110\105\110\103 \115\116\121\108\101","\091\111\107\093 \088\077\076\n \091\099\097\110\099\101\108\093 \077\065\050")local A=(R.new()):parse(c)if type(A)=="\115\116\114\105\110\103"then return S("\070\097\105\108\101\100 \116\111 \112\097\114\115\101 \071\114\111\117\112 \065\058 "..A)end local H=(R.new()):parse(E)if type(H)=="\115\116\114\105\110\103"then return S("\070\097\105\108\101\100 \116\111 \112\097\114\115\101 \071\114\111\117\112 \066\058 "..H)end local Z=A:get_fixtures()if not Z then return S("\070\097\105\108\101\100 \116\111 \103\101\116 \102\105\120\116\117\114\101\115 \102\114\111\109 \071\114\111\117\112 \065")end local h=H:get_fixtures()if not h then return S("\070\097\105\108\101\100 \116\111 \103\101\116 \102\105\120\116\117\114\101\115 \102\114\111\109 \071\114\111\117\112 \066")end if#Z==0 then return S("\071\114\111\117\112 \065 \099\111\110\116\097\105\110\115 \110\111 \102\105\120\116\117\114\101\115")end if#h==0 then return S("\071\114\111\117\112 \066 \099\111\110\116\097\105\110\115 \110\111 \102\105\120\116\117\114\101\115")end local s=O(Z,h)if not s then return S("\070\097\105\108\101\100 \116\111 \099\114\101\097\116\101 \102\105\120\116\117\114\101 \109\097\112\112\105\110\103")end local C=K.new()if not gma.gui.confirm("\068\111 \121\111\117 \119\097\110\116 \116\111 \099\108\111\110\101 \101\118\101\114\121\116\104\105\110\103\063","\091\111\107\093 \067\108\111\110\101 \097\108\108 \100\097\116\097 \102\114\111\109 \071\114\111\117\112 \065 \116\111 \071\114\111\117\112 \066 \n\091\099\097\110\099\101\108\093 \084\111 \115\101\108\101\099\116 \115\112\101\099\105\102\105\099 \114\097\110\103\101\115")then C:get_userinput()end local X={"\119\111\114\108\100";"\112\114\101\115\101\116\095\100\105\109\109\101\114","\112\114\101\115\101\116\095\112\111\115\105\116\105\111\110","\112\114\101\115\101\116\095\103\111\098\111";"\112\114\101\115\101\116\095\099\111\108\111\114","\112\114\101\115\101\116\095\098\101\097\109";"\112\114\101\115\101\116\095\102\111\099\117\115";"\112\114\101\115\101\116\095\099\111\110\116\114\111\108";"\112\114\101\115\101\116\095\115\104\097\112\101\114\115","\112\114\101\115\101\116\095\118\105\100\101\111";"\101\102\102\101\099\116","\115\101\113\117\101\110\099\101"}for c,E in ipairs(X)do local e=C:validate_syntax(C[E])if e~=true then S("\073\110\118\097\108\105\100 \115\121\110\116\097\120 \105\110 "..(E.." \102\105\108\116\101\114"))end end local t=(P.new()):parse(C.effect)if type(t)=="\115\116\114\105\110\103"then return S("\070\097\105\108\101\100 \116\111 \112\097\114\115\101 \101\102\102\101\099\116\115\058 "..t)end local p={}for c,E in ipairs(Z)do local e=E:match("\094\040\091\037\100\037\046\093\043\041")if e then p[e]=true end end local y=t:get_all_effects()if not y or#y==0 then return S("\078\111 \101\102\102\101\099\116\115 \102\111\117\110\100 \105\110 \116\104\101 \101\102\102\101\099\116 \112\111\111\108")end e("\070\111\117\110\100 "..(#y.." \101\102\102\101\099\116\115 \105\110 \116\104\101 \112\111\111\108"))e("\067\108\111\110\105\110\103 \102\105\120\116\117\114\101 \118\097\108\117\101\115 \102\114\111\109 \071\114\111\117\112 \065 \116\111 \071\114\111\117\112 \066")local x=A:values_clone(s,C)if x~=true then return x end local z=0 if j then for c=1,#y,1 do local E=y[c]if not E or not E.index then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \101\102\102\101\099\116 \100\097\116\097\044 \115\107\105\112\112\105\110\103")else local c=false local i=E.index local b=N(E)local P=false local j={}if m then j=N(b.effectlines or{})end for E=1,#(b.effectlines or{}),1 do local S=b.effectlines[E]if not S or not S.fixtures then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \101\102\102\101\099\116\108\105\110\101 \105\110 \101\102\102\101\099\116 "..(i.."\044 \115\107\105\112\112\105\110\103"))else local E=S.fixtures local b={}local N=false local m={}local j=#Z>=#h e("\080\114\111\099\101\115\115\105\110\103 \101\102\102\101\099\116 "..(i..(" \119\105\116\104 "..(#E.." \102\105\120\116\117\114\101\115"))))for i=1,#E,1 do local S=E[i]if not S then e("\087\097\114\110\105\110\103\058 \073\110\118\097\108\105\100 \102\105\120\116\117\114\101 \105\110 \101\102\102\101\099\116\108\105\110\101\044 \115\107\105\112\112\105\110\103")else local E=S:match("\094\040\091\037\100\037\046\093\043\041")if E and p[E]then c=true N=true if s[E]and#s[E]>0 then e("\080\114\111\099\101\115\115\105\110\103 \102\105\120\116\117\114\101 "..(E..(" \119\105\116\104 "..(#s[E].." \109\097\112\112\101\100 \102\105\120\116\117\114\101\115"))))for c,E in ipairs(s[E])do if E and(not j or not m[E])then local i=S:gsub("\094\091\037\100\037\046\093\043",E)table.insert(b,i)e("\065\100\100\101\100 \109\097\112\112\101\100 \102\105\120\116\117\114\101 "..(E..(" \116\111 \101\102\102\101\099\116 \040\109\097\112 \105\110\100\101\120 "..(c.."\041"))))if j then m[E]=true end end end else e("\087\097\114\110\105\110\103\058 \078\111 \109\097\112\112\105\110\103 \102\111\117\110\100 \102\111\114 \102\105\120\116\117\114\101 "..E)end else table.insert(b,S)e("\075\101\112\116 \110\111\110-\071\114\111\117\112 \065 \102\105\120\116\117\114\101 "..(E or"\117\110\107\110\111\119\110"))end end end if N then S.fixtures=b P=true e("\077\111\100\105\102\105\101\100 \101\102\102\101\099\116\108\105\110\101 \110\111\119 \104\097\115 "..(#b.." \102\105\120\116\117\114\101\115"))end end end if m and P then e("\080\114\101\115\101\114\118\105\110\103 \111\114\105\103\105\110\097\108 \101\102\102\101\099\116\108\105\110\101\115 \098\121 \100\117\112\108\105\099\097\116\105\110\103 \116\104\101\109")local c=0 for E,e in ipairs(b.effectlines)do if e.index>c then c=e.index end end for E,i in ipairs(j)do if i and(i.fixtures and#i.fixtures>0)then c=c+1 local E=N(i)E.index=c if E.attribute then E.attribute=E.attribute.." \040\079\114\105\103\105\110\097\108\041"end e("\065\100\100\105\110\103 \112\114\101\115\101\114\118\101\100 \111\114\105\103\105\110\097\108 \101\102\102\101\099\116\108\105\110\101 \119\105\116\104 \110\101\119 \105\110\100\101\120 "..c)table.insert(b.effectlines,E)end end end if c and P then e("\067\108\111\110\105\110\103 \101\102\102\101\099\116 "..(i.." \040\117\115\101\115 \071\114\111\117\112 \065 \102\105\120\116\117\114\101\115\041"))local c=w(i,b)if not c then return S("\070\097\105\108\101\100 \116\111 \099\108\111\110\101 \101\102\102\101\099\116 "..i)end z=z+1 end end end end if z==0 then gma.gui.msgbox("\078\111 \101\102\102\101\099\116\115 \109\111\100\105\102\105\101\100","\078\111 \101\102\102\101\099\116\115 \117\115\105\110\103 \071\114\111\117\112 \065 \102\105\120\116\117\114\101\115 \119\101\114\101 \102\111\117\110\100\046 \070\105\120\116\117\114\101 \118\097\108\117\101\115 \119\101\114\101 \099\108\111\110\101\100\046")else gma.gui.msgbox("\067\108\111\110\110\105\110\103 \099\111\109\112\108\101\116\101","\083\117\099\099\101\115\115\102\117\108\108\121 \109\111\100\105\102\105\101\100 "..(z.." \101\102\102\101\099\116\115\046 \n\080\108\101\097\115\101 \118\101\114\105\102\121 \117\112\100\097\116\101\100 \101\102\102\101\099\116\115 \097\110\100 \118\097\108\117\101\115\046 \n\n\084\104\097\110\107\115 \102\111\114 \117\115\105\110\103 \065\108\112\104\097\066\101\116\097\067\104\097\114\108\105\101\070\111\120\051 \069\100\105\116\105\111\110\033 \n\077\097\100\101 \066\121 \075\111\115\116\105\097\110\116\121\110 \089\101\114\111\107\104\105\110"))end e("\067\076\079\078\069 \102\117\110\099\116\105\111\110 \099\111\109\112\108\101\116\101\100 \115\117\099\099\101\115\115\102\117\108\108\121")return i end return CLONE